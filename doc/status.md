# –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 21.11.2024

---

## ‚úÖ –§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (Should-Have) - –ó–ê–í–ï–†–®–ï–ù–ê

### 2.1 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞" ‚úÖ

**Backend:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `bio` –∏ `social_links` –≤ –º–æ–¥–µ–ª—å User
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `RefreshToken` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è refresh-—Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `AccountController` —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏:
  - `GET /api/account/profile` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å –ø–æ–¥–ø–∏—Å–∫–æ–π
  - `PUT /api/account/profile` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, email, –±–∏–æ, —Å–æ—Ü.—Å–µ—Ç–∏)
  - `PUT /api/account/password` - —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–µ–∫—É—â–µ–≥–æ
  - `DELETE /api/account` - —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ (–∫–∞—Å–∫–∞–¥–Ω–æ–µ)
- ‚úÖ –°–æ–∑–¥–∞–Ω `AccountService` (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod (`account.validator.ts`)
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã (9 —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)

**Frontend:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `SettingsPage` —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ (–ü—Ä–æ—Ñ–∏–ª—å, –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `ProfileSettings`:
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏, email, –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ Instagram, Twitter, Spotify
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `SecuritySettings`:
  - –§–æ—Ä–º–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
  - –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (AlertDialog)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç `/settings` –≤ `App.tsx`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –≤ `AccountPage`
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `api.ts` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è

---

### 2.2 Refresh-—Ç–æ–∫–µ–Ω—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚úÖ

**Backend:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `refresh_tokens` –≤ –ë–î
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `TokenService`:
  - `generateAccessToken()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è JWT (15 –º–∏–Ω—É—Ç)
  - `generateRefreshToken()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è refresh token (7 –¥–Ω–µ–π)
  - `verifyRefreshToken()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
  - `revokeRefreshToken()` - –æ—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–∞ (logout)
  - `revokeAllUserTokens()` - logout —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
  - `cleanupExpiredTokens()` - –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `AuthController`:
  - `/api/auth/register` - –≤—ã–¥–∞—ë—Ç access + refresh —Ç–æ–∫–µ–Ω—ã
  - `/api/auth/login` - –≤—ã–¥–∞—ë—Ç access + refresh —Ç–æ–∫–µ–Ω—ã
  - `/api/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token
  - `/api/auth/logout` - —É–¥–∞–ª–µ–Ω–∏–µ refresh token
- ‚úÖ Refresh —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ httpOnly cookies (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `cookie-parser` middleware
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã (8 —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)

**Frontend:**
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `api.ts`:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ 401 –æ—à–∏–±–∫–µ
  - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å –Ω–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º
  - –†–∞–∑–ª–æ–≥–∏–Ω –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º refresh
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `store.ts`:
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ refresh token –≤ localStorage
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ `/auth/logout` –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
  - –û—á–∏—Å—Ç–∫–∞ –æ–±–æ–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ `refreshAccessToken()` –∏ `logout()` –≤ `api.ts`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**Backend:**
- –ù–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤: 7
- –ù–æ–≤—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤: 1 (AccountController)
- –ù–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: 1 (TokenService)
- –ù–æ–≤—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤: 1 (account.validator)
- –ù–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤: 17 (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: ~75%

**Frontend:**
- –ù–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü: 3 (SettingsPage, ProfileSettings, SecuritySettings)
- –ù–æ–≤—ã—Ö API —Ñ—É–Ω–∫—Ü–∏–π: 6
- –ù–æ–≤—ã—Ö —Ä–æ—É—Ç–æ–≤: 1 (/settings)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –ù–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü: 1 (refresh_tokens)
- –ù–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ User: 2 (bio, social_links)
- –ú–∏–≥—Ä–∞—Ü–∏–π: 1

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**–§–∞–∑–∞ 3: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (Nice-to-Have)**
- 3.1 –í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ UI
- 3.2 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- 3.3 Rate Limiting
- 3.4 API Documentation (Swagger)
- 3.5 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏
- 3.6 –£–ª—É—á—à–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (E2E —Ç–µ—Å—Ç—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ç–µ—Å—Ç—ã backend –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- Refresh-—Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Auto-refresh –º–µ—Ö–∞–Ω–∏–∑–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ refresh-—Ç–æ–∫–µ–Ω–æ–≤ –≤ httpOnly cookies
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Backend: Express, Prisma, Zod, bcrypt, jsonwebtoken, cookie-parser
- Frontend: React, Zustand, Axios, shadcn/ui, Tailwind CSS
- Testing: Jest, Supertest
- Database: PostgreSQL

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- Layered Architecture (Controllers ‚Üí Services ‚Üí Repositories)
- JWT –¥–ª—è access tokens (–∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ)
- Refresh tokens –≤ –ë–î (–¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ)
- Auto-refresh –º–µ—Ö–∞–Ω–∏–∑–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –æ–±–æ–∏—Ö —É—Ä–æ–≤–Ω—è—Ö (–∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä)
